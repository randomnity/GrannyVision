<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title></title>

  <script type="text/javascript"
          src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Roboto:500'
        rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Cabin:500'
        rel='stylesheet' type='text/css'>


  <link rel="stylesheet" href="semantic/semantic.css" type='text/css'>
  <script type="text/javascript" src="semantic/semantic.js"></script>

  <link rel="stylesheet" href="override.css" type='text/css'>

  <script>


    //check that the file API is supported in the browser
    $(document).ready(function () {

      if (window.File && window.FileReader && window.FileList && window.Blob) {
      }
      else {
        alert('The File APIs are not fully supported in this browser.');
      }

      //add Listener for both buttons
      $('#google-button').on("click", function () {

        $('#file-output').html("<img src='" + "images/googlehomepage.png" + "' />")

        //clears the file input so that reuploading the same image will work
        $("#image-upload").replaceWith($("#image-upload").val('').clone(true));
      });


//  $('.ui.sticky').sticky();

      // render the image in our view
      function renderImage(file) {

        // generate a new FileReader object
        var reader = new FileReader();

        // inject an image with the src url
        reader.onload = function (event) {
          the_url = event.target.result
          $('#file-output').html("<img src='" + the_url + "' />")

        }

        // when the file is read it triggers the onload event above.
        reader.readAsDataURL(file);
      }

      // handle input changes
      $("#image-upload").on("click", function () {


        $("#image-upload").change(function () {
          console.log(this.files);
          console.log("detected");
          // grab the first image in the FileList object and pass it to the function
          renderImage(this.files[0])
        });
      });


      $('#upload-button').on("click", (function () {
        $(this).parent(".whole.file")
            .find('input[type=file]')
            .trigger('click');
      }));


      $('.granny-vision')
          .popup({
            position: 'bottom center',
            target: '.granny-vision',
            title: 'Why do elderly see differently?',
            content: 'As humans age, they begin to lose visual and colour perception. This resource intends to mimick how an elderly sees the world.'
          })
      ;


    });


  </script>

</head>
<body>
<div class="whole file">
  <div class="ui one column centered grid">
    <div class="column">
      <p>
      <center>
        <h1>See &nbsp
          <button class="ui green basic button" id="google-button"><h1>
            Google</h1></button>
          or &nbsp
          <button class="ui button" id="upload-button"><label
              for="image-upload"><h1>your design<i class="upload icon"></i></h1>
          </button>

          &nbsp with <label class="granny-vision"><u>Granny vision</u></label>.
        </h1>
      </center>
      <input id="image-upload" type="file">
    </div>
  </div>

  <p>
  <p>

  <div class="ui centered grid" id="file-output">
    <img src='images/googlehomepage.png'></img>
  </div>
</div>

</body>
</html>
